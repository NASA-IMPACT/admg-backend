<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GCMD Sync &mdash; CASEI 0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx-toolbox-code.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Docker Installation" href="project_installation.html" />
    <link rel="prev" title="CMR Recommender" href="cmr_recommender.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            CASEI
          </a>
              <div class="version">
                0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">What is CASEI?</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="casei_overview.html">Catalog of Archived Suborbital Earth Science Investigations</a></li>
<li class="toctree-l1"><a class="reference internal" href="curation_interface.html">Curation Interface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using the API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_doc.html">API documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Understanding the Application</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="data_models.html">Understanding Data Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="change_objects.html">Understanding the Change Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="cmr_recommender.html">CMR Recommender</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">GCMD Sync</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#diagram-breakdown">Diagram Breakdown</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Running the Application Locally</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="project_installation.html">Docker Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_tests.html">Running Tests</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CASEI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">GCMD Sync</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/documentation/gcmd_sync.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gcmd-sync">
<h1>GCMD Sync<a class="headerlink" href="#gcmd-sync" title="Permalink to this heading"></a></h1>
<p>The GCMD Sync is a method of querying metadata from the Global Change Master Directory to synchronize the CASEI’s local database with the current state of the Keyword Management Service (KMS) API.</p>
<p>This is a comprehensive approach to ensure scientific keywords and terms are consistant between our databases and GCMD.</p>
<p>The GCMD sync is an asynchronous task that fetches alist of keywords for four Concept Schemes of interest (instruments, platforms, projects, sciencekeywords). Each keyword’s current state is compared to the state in the DB then local records are created, updated or deleted as needed (in draft form). Finally, a list of Affected Records is generated in the MI for each modified keyword then is reviewed by staff. If a keyword has no affected records, its draft is automatically published.</p>
<p>It ensures tcontrolled vocabulary of GCMD keywords are incorporated within the CASEI metadata.  A semi-automated syncing feature ensures consistency in CASEI to the periodic updates to the GCMD keywords.  When new versions of the GCMD vocabulary are issued, CASEI alerts curators by providing a list of any changes.  Changed keywords may be new additions, deletions, or modifications of existing keywords.  Based on the database content, CASEI automatically generates a list of metadata records associated with any modified keywords, any deleted keywords, and provides suggestions for records that likely need to be associated with any newly added keywords.  Curators then review each updated keyword and any impacts to the associated metadata in CASEI.</p>
<section id="diagram-breakdown">
<h2>Diagram Breakdown<a class="headerlink" href="#diagram-breakdown" title="Permalink to this heading"></a></h2>
<p>First users click on the “Sync GCMD Button” thus generating a scheduled sync_gcmd task asking for each GCMD scheme.</p>
<p>Next a GET request is ran to retreive metadata from the GCMD KMS API.</p>
<p><cite>&lt;https://gcmd.earthdata.nasa.gov/kms/concepts/concept_scheme/&lt;scheme&gt;&gt;</cite></p>
<p>Next a loop runs through each keyword and checks if it contains a UUID in the database. If it does then it checks if the Keyword Properties match the database record. If it matches then no actions happens and it continues the loop until it is DONE. If it does not match the database record then it creates an “Update” Draft for that keyword.</p>
<p>If they do not contain a UUID then users create a “Create” draft for that keyword. Then it checks if there are recommended objects realted to the keyword. If yes it moves on with the process and if not it autopublishes the draft.</p>
<p>The GCMD Sync process continues to create a set of all UUIDs of returned keywords. Then it retrieves all GCMD items that are of the relevant type.</p>
<p>It runs another loops through the retrieved GCMD items and chekcs if the UUID of the GCMD item is not in set of UUIDs. If it is true then a “Delete” draft is created for the GCMD item. If it is in set of UUIDs then no action is needed and it sends a notification email to the admin.</p>
<p>The email contains a count of items added, updated, deleted, and auto-published.</p>
<img alt="GCMD Sync" src="../_images/gcmd_sync_activity.png" />
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cmr_recommender.html" class="btn btn-neutral float-left" title="CMR Recommender" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="project_installation.html" class="btn btn-neutral float-right" title="Docker Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, NASA IMPACT.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>