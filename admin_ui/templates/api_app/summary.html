{% extends "api_app/base.html" %}
{% load render_table from django_tables2 %}
{% load humanize %}

{% block page %}
  <header class="row mx-3 my-5">
    <div class="col-auto mr-auto">
      <div class="row">
        <div>
          <h1>Welcome, {% firstof request.user.get_full_name request.user.username %}.</h1>
        </div>
      </div>
    </div>
    <div class="col-auto">
      <a class="btn btn-primary" href="{% url 'mi-change-add' 'campaign' %}">
        Add New Campaign +
      </a>
    </div>
  </header>

  <div class="row mx-3 my-5">
    <div class="col-lg-4 border">
      <p class="text-uppercase my-3">Campaigns</p>
      <div class="row">
        <div class="col-sm-3">
          <span class="lead font-weight-bold text-nowrap">
            {{ total_counts.campaign }}
          </span>
          <p>Total</p>
        </div>
        <div class="col-sm-3">
          <span class="lead font-weight-bold text-nowrap">
            {{ draft_status_counts.campaign.In_Review }}
          </span>
          <p>In review</p>
        </div>
        <div class="col-sm-3">
          <span class="lead font-weight-bold text-nowrap">
            {{ draft_status_counts.campaign.In_Admin_Review }}
          </span>
          <p>In admin review</p>
        </div>
        <div class="col-sm-3">
          <span class="lead font-weight-bold text-nowrap">
            {{ draft_status_counts.campaign.Published }}
          </span>
          <p>Pub&shy;lished</p>
        </div>
      </div>
    </div>

    <div class="col-lg-4 border">
      <p class="text-uppercase my-3">Platforms</p>
      <div class="row">
        <div class="col-sm-3">
          <span class="lead font-weight-bold text-nowrap">
            {{ total_counts.platform }}
          </span>
          <p>Total</p>
        </div>
        <div class="col-sm-3">
          <span class="lead font-weight-bold text-nowrap">
            {{ draft_status_counts.platform.In_Review }}
          </span>
          <p>In review</p>
        </div>
        <div class="col-sm-3">
          <span class="lead font-weight-bold text-nowrap">
            {{ draft_status_counts.platform.In_Admin_Review }}
          </span>
          <p>In admin review</p>
        </div>
        <div class="col-sm-3">
          <span class="lead font-weight-bold text-nowrap">
            {{ draft_status_counts.platform.Published }}
          </span>
          <p>Pub&shy;lished</p>
        </div>
      </div>
    </div>

    <div class="col-lg-4 border">
      <p class="text-uppercase my-3">Instruments</p>
      <div class="row">
        <div class="col-sm-3">
          <span class="lead font-weight-bold text-nowrap">
            {{ total_counts.instrument }}
          </span>
          <p>Total</p>
        </div>
        <div class="col-sm-3">
          <span class="lead font-weight-bold text-nowrap">
            {{ draft_status_counts.instrument.In_Review }}
          </span>
          <p>In review</p>
        </div>
        <div class="col-sm-3">
          <span class="lead font-weight-bold text-nowrap">
            {{ draft_status_counts.instrument.In_Admin_Review }}
          </span>
          <p>In admin review</p>
        </div>
        <div class="col-sm-3">
          <span class="lead font-weight-bold text-nowrap">
            {{ draft_status_counts.instrument.Published }}
          </span>
          <p>Pub&shy;lished</p>
        </div>
      </div>
    </div>
  </div>

  <div class="row mx-3 my-5">
    <div class="col-8">
      <h3>My Drafts</h3>
      {% render_table table %}
    </div>

    <div class="col-4">
      <h3>Inventory Activities</h3>
      {% include 'snippets/related_approval_logs.html' with approval_logs=activity_list show_link=True%}
    </div>
  </div>
{% endblock %}
